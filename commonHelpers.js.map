{"version":3,"file":"commonHelpers.js","sources":["../src/img/icon-error.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__eb775c6f__\"","import axios from 'axios';\n\nimport { refs, querySearch, page, per_page } from '../main';\n\nexport async function getSearch() {\n  const ApiKey = '43688767-8e78f2c96043da1155d4d6687';\n  const searchParams = new URLSearchParams({\n    key: ApiKey,\n    q: querySearch,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page,\n    page,\n  });\n\n  const { data } = await axios(`https://pixabay.com/api/?${searchParams}`);\n  return data;\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        id,\n        tags,\n        largeImageURL,\n        webformatURL,\n        comments,\n        likes,\n        downloads,\n        views,\n      }) =>\n        `<li class=\"gallery-item\" id=\"${id}\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${webformatURL}\"\n                    alt=\"${tags}\"\n                    />               \n            </a>\n            <ul class=\"gallery-stat-list\">\n                    <li class=\"stat-item\"><h2 class=\"title\">Likes</h2><p class=\"stat-data\">${likes}</p></li>\n                    <li class=\"stat-item\"><h2 class=\"title\">Views</h2><p class=\"stat-data\">${views}</p></li>\n                    <li class=\"stat-item\"><h2 class=\"title\">Comments</h2><p class=\"stat-data\">${comments}</p></li>\n                    <li class=\"stat-item\"><h2 class=\"title\">Downloads</h2><p class=\"stat-data\">${downloads}</p></li>\n            </ul>\n            \n        </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconError from './img/icon-error.svg';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getSearch } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nexport const refs = {\n  form: document.querySelector('.task-form'),\n  input: document.querySelector('.form-input'),\n  list: document.querySelector('.gallery'),\n  loadWrapp: document.querySelector('.wrapper-btn'),\n  loadBtn: document.querySelector('.load-btn'),\n};\n\nexport let querySearch = null;\nexport const per_page = 15;\nexport let page = 1;\n\nlet heightItem = null;\nlet numberImgAll = null;\nlet maxPage = null;\n\nconst messageBlank = `Please enter your search query, the field cannot be blank!`;\nconst messageSorry = `Sorry, there are no images matching your search query. Please try again!`;\nconst messageEnd = \"We're sorry, but you've reached the end of search results.\";\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.loadBtn.addEventListener('click', onClickLoad);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  refs.loadBtn.classList.add('is-hidden');\n  const inputValue = refs.input.value.trim();\n\n  if (!inputValue) {\n    refs.list.innerHTML = '';\n    clearPage(messageBlank);\n    return;\n  }\n\n  querySearch = inputValue;\n  refs.list.innerHTML = `<span class=\"loader\"></span>`;\n  await getSearch()\n    .then(data => {\n      if (!data.hits.length) {\n        refs.list.innerHTML = '';\n        clearPage(messageSorry);\n        return;\n      }\n      refs.list.innerHTML = createMarkup(data.hits);\n      lightbox.refresh();\n      const itemParams = refs.list.firstChild.getBoundingClientRect();\n      heightItem = itemParams.height * 2;\n      window.scrollBy({\n        top: heightItem,\n        behavior: 'smooth',\n      });\n      page += 1;\n      numberImgAll = data.totalHits;\n      maxPage = Math.ceil(numberImgAll / per_page);\n      if (page <= maxPage) {\n        refs.loadBtn.classList.remove('is-hidden');\n      }\n    })\n    .catch(error => console.log('catch', error));\n  refs.form.reset();\n}\n\nasync function onClickLoad(event) {\n  refs.loadBtn.classList.add('is-hidden');\n  refs.loadWrapp.insertAdjacentHTML(\n    'beforeend',\n    `<span class=\"loader\"></span>`\n  );\n  await getSearch()\n    .then(data => {\n      refs.list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n      lightbox.refresh();\n      window.scrollBy({\n        top: heightItem,\n        behavior: 'smooth',\n      });\n      page += 1;\n      refs.loadWrapp.lastChild.remove();\n      if (page > maxPage) {\n        clearPage(messageEnd);\n        return;\n      }\n      refs.loadBtn.classList.remove('is-hidden');\n    })\n    .catch(error => console.log('catch', error));\n}\n\nfunction clearPage(message) {\n  refs.loadBtn.classList.add('is-hidden');\n  return iziToast.error({\n    ...iziOptions,\n    message,\n    backgroundColor: 'rgb(239, 64, 64)',\n    iconUrl: iconError,\n  });\n}\n\nconst iziOptions = {\n  id: 'myIziToast',\n  title: 'Warning',\n  titleColor: 'rgb(255, 255, 255)',\n  titleSize: '16',\n  messageColor: 'rgb(255, 255, 255)',\n  messageSize: '16',\n  position: 'topRight',\n};\n\nconst lightbox = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n"],"names":["iconError","getSearch","ApiKey","searchParams","querySearch","per_page","page","data","axios","createMarkup","arr","id","tags","largeImageURL","webformatURL","comments","likes","downloads","views","refs","heightItem","numberImgAll","maxPage","messageBlank","messageSorry","messageEnd","onSubmit","onClickLoad","event","inputValue","clearPage","lightbox","error","message","iziToast","iziOptions","SimpleLightbox"],"mappings":"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"}